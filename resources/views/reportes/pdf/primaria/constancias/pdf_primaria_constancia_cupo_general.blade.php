<!DOCTYPE html>
<html>

<head>
  <title>Constancia de cupo</title>
  <!-- <link rel="stylesheet" href="sass/main.css" media="screen" charset="utf-8"/> -->
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta http-equiv="content-type" content="text-html; charset=utf-8">
  <style type="text/css">
    /*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */
    /* Document
        ========================================================================== */
    /**
      * 1. Correct the line height in all browsers.
      * 2. Prevent adjustments of font size after orientation changes in iOS.
      */
    html {
      line-height: 1.15;
      /* 1 */
      -webkit-text-size-adjust: 100%;
      /* 2 */
    }

    /* Sections
        ========================================================================== */
    /**
      * Remove the margin in all browsers.
      */
    body {
      margin: 0;
    }

    /**
      * Render the `main` element consistently in IE.
      */
    main {
      display: block;
    }

    /**
      * Correct the font size and margin on `h1` elements within `section` and
      * `article` contexts in Chrome, Firefox, and Safari.
      */
    h1 {
      font-size: 2em;
      margin: 0.67em 0;
    }

    /* Grouping content
        ========================================================================== */
    /**
      * 1. Add the correct box sizing in Firefox.
      * 2. Show the overflow in Edge and IE.
      */
    hr {
      box-sizing: content-box;
      /* 1 */
      height: 0;
      /* 1 */
      overflow: visible;
      /* 2 */
    }

    /**
      * 1. Correct the inheritance and scaling of font size in all browsers.
      * 2. Correct the odd `em` font sizing in all browsers.
      */
    pre {
      font-family: monospace, monospace;
      /* 1 */
      font-size: 1em;
      /* 2 */
    }

    /* Text-level semantics
        ========================================================================== */
    /**
      * Remove the gray background on active links in IE 10.
      */
    a {
      background-color: transparent;
    }

    /**
      * 1. Remove the bottom border in Chrome 57-
      * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
      */
    abbr[title] {
      border-bottom: none;
      /* 1 */
      text-decoration: underline;
      /* 2 */
      text-decoration: underline dotted;
      /* 2 */
    }

    /**
      * Add the correct font weight in Chrome, Edge, and Safari.
      */
    b,
    strong {
      font-weight: bolder;
    }

    /**
      * 1. Correct the inheritance and scaling of font size in all browsers.
      * 2. Correct the odd `em` font sizing in all browsers.
      */
    code,
    kbd,
    samp {
      font-family: monospace, monospace;
      /* 1 */
      font-size: 1em;
      /* 2 */
    }

    /**
      * Add the correct font size in all browsers.
      */
    small {
      font-size: 80%;
    }

    /**
      * Prevent `sub` and `sup` elements from affecting the line height in
      * all browsers.
      */
    sub,
    sup {
      font-size: 75%;
      line-height: 0;
      position: relative;
      vertical-align: baseline;
    }

    sub {
      bottom: -0.25em;
    }

    sup {
      top: -0.5em;
    }

    /* Embedded content
        ========================================================================== */
    /**
      * Remove the border on images inside links in IE 10.
      */
    img {
      border-style: none;
    }

    /* Forms
        ========================================================================== */
    /**
      * 1. Change the font styles in all browsers.
      * 2. Remove the margin in Firefox and Safari.
      */
    button,
    input,
    optgroup,
    select,
    textarea {
      font-family: inherit;
      /* 1 */
      font-size: 100%;
      /* 1 */
      line-height: 1.15;
      /* 1 */
      margin: 0;
      /* 2 */
    }

    /**
      * Show the overflow in IE.
      * 1. Show the overflow in Edge.
      */
    button,
    input {
      /* 1 */
      overflow: visible;
    }

    /**
      * Remove the inheritance of text transform in Edge, Firefox, and IE.
      * 1. Remove the inheritance of text transform in Firefox.
      */
    button,
    select {
      /* 1 */
      text-transform: none;
    }

    /**
      * Correct the inability to style clickable types in iOS and Safari.
      */
    button,
    [type="button"],
    [type="reset"],
    [type="submit"] {
      -webkit-appearance: button;
    }

    /**
      * Remove the inner border and padding in Firefox.
      */
    button::-moz-focus-inner,
    [type="button"]::-moz-focus-inner,
    [type="reset"]::-moz-focus-inner,
    [type="submit"]::-moz-focus-inner {
      border-style: none;
      padding: 0;
    }

    /**
      * Restore the focus styles unset by the previous rule.
      */
    button:-moz-focusring,
    [type="button"]:-moz-focusring,
    [type="reset"]:-moz-focusring,
    [type="submit"]:-moz-focusring {
      outline: 1px dotted ButtonText;
    }

    /**
      * Correct the padding in Firefox.
      */
    fieldset {
      padding: 0.35em 0.75em 0.625em;
    }

    /**
      * 1. Correct the text wrapping in Edge and IE.
      * 2. Correct the color inheritance from `fieldset` elements in IE.
      * 3. Remove the padding so developers are not caught out when they zero out
      *    `fieldset` elements in all browsers.
      */
    legend {
      box-sizing: border-box;
      /* 1 */
      color: inherit;
      /* 2 */
      display: table;
      /* 1 */
      max-width: 100%;
      /* 1 */
      padding: 0;
      /* 3 */
      white-space: normal;
      /* 1 */
    }

    /**
      * Add the correct vertical alignment in Chrome, Firefox, and Opera.
      */
    progress {
      vertical-align: baseline;
    }

    /**
      * Remove the default vertical scrollbar in IE 10+.
      */
    textarea {
      overflow: auto;
    }

    /**
      * 1. Add the correct box sizing in IE 10.
      * 2. Remove the padding in IE 10.
      */
    [type="checkbox"],
    [type="radio"] {
      box-sizing: border-box;
      /* 1 */
      padding: 0;
      /* 2 */
    }

    /**
      * Correct the cursor style of increment and decrement buttons in Chrome.
      */
    [type="number"]::-webkit-inner-spin-button,
    [type="number"]::-webkit-outer-spin-button {
      height: auto;
    }

    /**
      * 1. Correct the odd appearance in Chrome and Safari.
      * 2. Correct the outline style in Safari.
      */
    [type="search"] {
      -webkit-appearance: textfield;
      /* 1 */
      outline-offset: -2px;
      /* 2 */
    }

    /**
      * Remove the inner padding in Chrome and Safari on macOS.
      */
    [type="search"]::-webkit-search-decoration {
      -webkit-appearance: none;
    }

    /**
      * 1. Correct the inability to style clickable types in iOS and Safari.
      * 2. Change font properties to `inherit` in Safari.
      */
    ::-webkit-file-upload-button {
      -webkit-appearance: button;
      /* 1 */
      font: inherit;
      /* 2 */
    }

    /* Interactive
        ========================================================================== */
    /*
      * Add the correct display in Edge, IE 10+, and Firefox.
      */
    details {
      display: block;
    }

    /*
      * Add the correct display in all browsers.
      */
    summary {
      display: list-item;
    }

    /* Misc
        ========================================================================== */
    /**
      * Add the correct display in IE 10+.
      */
    template {
      display: none;
    }

    /**
      * Add the correct display in IE 10.
      */
    [hidden] {
      display: none;
    }




    body {
      /*font-family: 'Calibri';*/
      font-family: 'times sans-serif';
      font-size: 14px;
      margin-top: 4cm;
      margin-bottom: 3cm;
      margin-left: 3.5cm;
      margin-right: 3.5cm;
    }

    .row {
      width: 100%;
      display: block;
      position: relative;
      /* margin-left: -30px; */
      /* margin-right: -30px; */
    }

    .row::after {
      content: "";
      clear: both;
      display: table;
    }

    .column,
    .columns {
      width: 100%;
      float: left;
      box-sizing: border-box !important;
    }

    .medium-1 {
      width: 8.33333333333%;
    }

    .medium-4 {
      width: 16.6666666667%;
    }

    .medium-3 {
      width: 25%;
    }

    .medium-4 {
      width: 33.3333333333%;
    }

    .medium-5 {
      width: 41.6666666667%;
    }

    .medium-6 {
      width: 50%;
    }

    .medium-7 {
      width: 58.3333333333%;
    }

    .medium-8 {
      width: 66.6666666667%;
    }

    .medium-9 {
      width: 75%;
    }

    .medium-10 {
      width: 83.3333333333%;
    }

    .medium-11 {
      width: 91.6666666667%;
    }

    .medium-12 {
      width: 100%;
    }

    .clearfix::after {
      content: "";
      clear: both;
      display: table;
    }

    span {
      font-weight: bold;
    }

    p {
      margin: 0;
    }

    .left {
      float: left;
    }

    .float-right: {
      float: right;
    }

    .logo {
      width: 100%;
    }

    .box-solicitud {
      border: 1px solid "black";
      padding: 5px;
      border-radius: 2px;
    }

    .estilos-tabla {
      width: 100%;
    }

    .estilos-tabla tr th {
      font-size: 12px;
      background-color: #000;
      color: #fff;
      height: 30px;
      padding-left: 5px;
      padding-right: 5px;
      box-sizing: border-box;
      text-align: center;
    }

    .estilos-tabla tr td {
      font-size: 12px;
      padding-left: 2px;
      padding-right: 2px;
      box-sizing: border-box;
      color: #000;
    }

    .page_break {
      page-break-before: always;
    }

    /** Define the footer rules **/
    footer {
      position: fixed;
      bottom: 0px;
      left: 0cm;
      right: 0cm;
      /** Extra personal styles **/
      color: #000;
      text-align: center;
    }

    header {
        left: 0px;
      position: fixed;
      top: -10px;
      right: 0px;
      height: 3px;
      /** Extra personal styles **/

      margin-left: 5px;
      margin-right: 5px;
    }

    #watermark {
      position: fixed;
      top: 15%;
      left: 0;
      width: 700px;
      height: 700px;
      opacity: .3;
    }

    .img-header {
      height: 80px;
    }

    .inicio-pagina {
      margin-top: 0;
      display: block;
    }

    @page {
        margin-left: 0.5cm;
        margin-right: 0.5cm;
      margin-top: 30px;
      margin-bottom: 30px;
    }

    .listas-info {
      margin-top: 0px;
      margin-bottom: 0px;
    }

    .listas-info li {
      display: inline;
      list-style-type: none;
      margin-left: 40px;

    }

    .listas-info li:first-child {
      margin-left: 0px;
    }

    .listas-asistencia {
      margin-top: 0px;
      margin-bottom: 0px;
      margin-left: 0px !important;
      padding-left: 0 !important;
    }

    .listas-asistencia li {
      display: inline;
      list-style-type: none;
    }

    .table {
      width: 100%;
    }

    .table {
      border-collapse: collapse;
    }

    .table th {
      border-bottom: 1px solid #000;
    }

    .table td,
    .table th {
      padding-top: 0px;
      padding-bottom: 0px;
      padding-right: 5px;
    }

    .page-number:before {
      content: "Pág "counter(page);
    }

    /** row columna triple Nivel o Escuela**/
    .ne-txt {
      width: 66px;
    }

    .tcenter {
      text-align: center;
    }

    .tright {
      text-align: right;
    }

    .bordered {
      border: 1px solid #000;
    }

    .fotoAlumno{
      width: 2.5cm;
      height: 3cm;
      margin-left: -3.1cm;
    }
  </style>
</head>

<header>

</header>

@php
$sumaDePromedios = 0.0;
$vuelta = 0;
@endphp
@php
use App\Http\Helpers\TruncarDecimales;
@endphp
<body>
  @foreach ($inscrito as $item)
    <div class="row" style="margin-top:-30px">
      <div class="columns medium-12">
        <p class="tright">{{$fechaHoy}}</p>
        <br>
        <p class="tright"><b>ASUNTO</b>: CONSTANCIA DE CUPO</p>
        @if ($incluyeFoto == "SI")
          @if ($item->curPrimariaFoto != "")
            @if (file_exists(base_path('storage/app/public/primaria/cursos/fotos/' . $item->perAnioPago . '/' . $campus .'/'. $item->curPrimariaFoto)))

              <p><img class="fotoAlumno" style="float: left; margin-top: 68px;" src="{{base_path('storage/app/public/primaria/cursos/fotos/' . $item->perAnioPago . '/' . $campus. '/' . $item->curPrimariaFoto) }}"></p>
            @endif
          @endif
        @endif
        <br>
        <br>

        {{--  <br>  --}}

        <p>A quien corresponda:</p>
        <br>

        <p style="font-size: 15px; text-align: justify;">
          La que suscribe,
          @if ($ubicacion == "CME")
          MAOE. María Trinidad Díaz Cervera,
          @endif
          @if ($ubicacion == "CVA")
          Mtra. Arely Martinez Díaz,
          @endif
          directora de la Escuela Primaria Modelo con clave {{ $item->depClaveOficial }} establecida en esta ciudad, HACE CONSTAR @if ($item->perSexo == "F") que la alumna: @endif @if ($item->perSexo == "M") que el alumno: @endif

        </p>
        <br>
        <p style="text-align: center"><b>{{$item->perApellido1.' '.$item->perApellido2.' '.$item->perNombre}}</b></p>
        <br>
        <p style="font-size: 15px; text-align: justify;">

          obtuvo las siguientes calificaciones en el {{strtoupper($grado)}}, GRUPO "{{$item->cgtGrupo}}" del curso escolar {{$periodo_inicio}}-{{$periodo_fin}}:

          {{--  obtuvo el promedio en las asignaturas academicas en el {{$grado}},
          grupo "{{$item->cgtGrupo}}" en el
          curso escolar {{$periodo_inicio}}-{{$periodo_fin}} sin considerar dentro de este promedio Educ. Fisica y Educ. Artística:  --}}
        </p>
        <br>

      </div>
    </div>

    <div class="row" style="margin-left: -1.5cm;">
        <div class="columns medium-12">
            <table class="table">
                <thead>
                    <tr>
                        <th align="center" style="font-weight: 400; width:240px; border-top: 1px solid; border-right: 1px solid; border-bottom: 1px solid; border-left: 1px solid;"><b>Materia</b></th>
                        <th align="center" style="font-weight: 400; width:72px; border-top: 1px solid; border-right: 1px solid; border-bottom: 1px solid; border-left: 1px solid;"><b>1er período</b></th>
                        <th align="center" style="font-weight: 400; width:72px; border-top: 1px solid; border-right: 1px solid; border-bottom: 1px solid; border-left: 1px solid;"><b>2do Período</b></th>
                        <th align="center" style="font-weight: 400; width:72px; border-top: 1px solid; border-right: 1px solid; border-bottom: 1px solid; border-left: 1px solid;"><b>3er Período</b></th>
                        <th align="center" style="font-weight: 400; width:72px; border-top: 1px solid; border-right: 1px solid; border-bottom: 1px solid; border-left: 1px solid;"><b>Promedio</b></th>

                    </tr>
                </thead>
                <tbody>
                    @php
                      $inscritoSP = DB::select("call procPrimariaBoletaCalificacionesCurso(".$item->id.")");
                    @endphp
                    @foreach ($inscritoSP as $itemInscrito)
                    <!-- filtra solo materias SEP  -->
                    @if ($itemInscrito->matEspecialidad == "1FA")
                      <tr>
                          <td style="border-top: 1px solid; border-right: 1px solid; border-bottom: 1px solid; border-left: 1px solid;">{{$itemInscrito->matNombre}}</td>
                          <td style="border-top: 1px solid; border-right: 1px solid; border-bottom: 1px solid; border-left: 1px solid;" align="center">
                            @if ($itemInscrito->inscTrimestre1 != "")
                              {{$itemInscrito->inscTrimestre1SEP}}
                            @else
                            @endif
                          </td>
                          <td style="border-top: 1px solid; border-right: 1px solid; border-bottom: 1px solid; border-left: 1px solid;" align="center">
                            @if ($itemInscrito->inscTrimestre2 != "")
                              {{$itemInscrito->inscTrimestre2SEP}}
                            @else
                            @endif
                          </td>
                          <td style="border-top: 1px solid; border-right: 1px solid; border-bottom: 1px solid; border-left: 1px solid;" align="center">
                            @if ($itemInscrito->inscTrimestre3 != "")
                              {{$itemInscrito->inscTrimestre3SEP}}
                            @else

                            @endif
                          </td>
                          <td style="border-top: 1px solid; border-right: 1px solid; border-bottom: 1px solid; border-left: 1px solid;" align="center">

                            @if ($itemInscrito->inscTrimestre1 != "" && $itemInscrito->inscTrimestre2 != "" && $itemInscrito->inscTrimestre3 != "")
                              @if ($itemInscrito->inscPromedioTrimCALCULADOSEP == "10.0")
                                {{number_format((float)$itemInscrito->inscPromedioTrimCALCULADOSEP, 0, '.', '')}}
                              @else
                              {{number_format((float)$itemInscrito->inscPromedioTrimCALCULADOSEP, 1, '.', '')}}
                              @endif
                            @else

                            @endif
                          </td>
                      </tr>
                      @php
                          $sumaDePromedios = $sumaDePromedios + $itemInscrito->inscPromedioTrimCALCULADOSEP;
                          $vuelta++;

                          $promedioGeneral = $sumaDePromedios / $vuelta;
                      @endphp
                    @endif

                    @endforeach
                    <tr>
                      <td><b>PROMEDIO FINAL</b></td>
                      <td align="center"><b></b></td>
                      <td align="center"><b></b></td>
                      <td align="center"><b></b></td>
                      <td align="center"><b>
                        @if ($itemInscrito->inscTrimestre1 != "" && $itemInscrito->inscTrimestre2 != "" && $itemInscrito->inscTrimestre3 != "")
                        <b>{{TruncarDecimales::truncateFloat($promedioGeneral, 1)}}</b>

                        @php
                          $sumaDePromedios = 0.0;
                          $vuelta = 0;
                        @endphp
                        @else

                        @endif

                       </td>
                     </tr>
                </tbody>
            </table>
        </div>
    </div>

    <br>
    <div class="row">
        <p style="font-size: 15px; text-align: justify;">Y está inscrito al {{$gradoSiguiente}} de
            primaria en esta institución
            durante el próximo año lectivo ({{$periodo_fin}}-{{$periodo_siguiente}}) y cuenta con el cupo
            correspondiente el cual está a su disposición.</p>
        <br>
        <br>

        <p style="text-indent: 3em; font-size: 15px; text-align: justify;">
            A pedimento del interesado y para los fines legales que correspondan se
            expide la presente constancia con la fecha de hoy en la ciudad de
            @if ($ubicacion == "CME")
            Mérida, Yucatán, México.
            @endif
            @if ($ubicacion == "CVA")
            Valladolid, Yucatán, México.
            @endif
        </p>
    </div>

    <br><br><br><br><br><br><br>

    <div class="row">
      <div class="columns medium-12">

          <p class="tcenter"><b>ATENTAMENTE</b></p>
          <br><br><br><br>
          @if ($ubicacion == "CME")
          <p class="tcenter"><b>MAOE. MARÍA TRINIDAD DÍAZ CERVERA</b></p>
          @endif
          @if ($ubicacion == "CVA")
          <p class="tcenter"><b>MTRA. ARELY MARTINEZ DÍAZ</b></p>
          @endif
          <p class="tcenter"><b>DIRECTORA</b></p>

      </div>
  </div>
    @if(!$loop->last)
    <div class="page_break"></div>
    @endif
  @endforeach
</body>

</html>
